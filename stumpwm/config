;; Load quicklisp
(let ((quicklisp-init (merge-pathnames ".local/share/quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))
(setf *default-package* :stumpwm)
(in-package :stumpwm)
(set-module-dir "/usr/share/stupmwm/contrib/")
(define-key *top-map* (kbd "s-SPC") "exec mounch")

(set-prefix-key (kbd "F1"))

(load "~/.config/stumpwm/keybinding.lisp")
(load "~/.config/stumpwm/appearance.lisp")
(load "~/.config/stumpwm/modules.lisp")
(load "~/.config/stumpwm/functions.lisp")
(load "~/.config/stumpwm/lock.lisp")

(run-shell-command "feh --bg-scale $HOME/.local/share/backgrounds/current.jpg")

(setf stumpwm:*mouse-focus-policy* :sloppy
      *new-frame-action* :last-window)

(clear-window-placement-rules)

(stumpwm:grename "Browse")
(stumpwm:gnewbg "Dev")
(stumpwm:gnewbg "Slack")
(stumpwm:gnewbg "Spotify")

;;
(define-frame-preference "Browse" (0 t t :class "firefox"))
(define-frame-preference "Browse" (1 t t :class "Chromium"))
(define-frame-preference "Dev" (0 t t :class "Emacs"))
(define-frame-preference "Slack" (0 t t :class "Slack"))
(define-frame-preference "Spotify" (0 t t :class "Spotify"))
(define-frame-preference "Others" (0 t t :class "pavucontrol"))

(setf *startup-message* "StumpWM is ready!")

(when *initializing*
  (run-shell-command "~/.config/polybar/launch.sh"))

;; vim: ft=lisp
;; Local Variables:
;; mode: lisp
;; End:
